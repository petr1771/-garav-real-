<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GaRaV • Вечные Искры</title>
  <script src="https://unpkg.com/p5@1.9.0/lib/p5.js"></script>
  <style>
    body {margin:0;background:#000;overflow:hidden;color:#88ffff;font-family:'Courier New',monospace;cursor:crosshair;}
    h1 {position:fixed;top:10px;width:100%;z-index:10;font-size:24px;text-align:center;letter-spacing:3px;text-shadow:0 0 15px #00ffff;}
    .hint {position:fixed;top:55px;width:100%;z-index:10;font-size:18px;text-align:center;color:#00ffff;text-shadow:0 0 10px #00ffff;}
    button {position:fixed;top:85px;left:50%;transform:translateX(-50%);z-index:10;padding:14px 36px;background:transparent;border:2px solid #00ffff;color:#00ffff;font-size:19px;border-radius:50px;cursor:pointer;box-shadow:0 0 25px #00ffff;transition:0.4s;}
    button:hover {background:#00ffff33;color:white;transform:translateX(-50%) scale(1.1);}
  </style>
</head>
<body>
  <h1 id="title">GaRaV • 1 Искра • Твоя звезда будет сиять 100 лет</h1>
  <div class="hint">Кликни в космос — зажги свою вечную Искру</div>
  <button onclick="addSpark()">Зажечь Искру</button>

  <script>
    let sparks = [];
    let myp5 = new p5((p) => {
      p.setup = () => {
        p.createCanvas(p.windowWidth, p.windowHeight);
        sparks.push(new Spark(p, "от Петра для моей жены ❤️"));
      };
      p.draw = () => {
        p.background(0, 0, 20);
        p.stroke(100, 200, 255, 50);
        for (let i = 0; i < sparks.length; i++) {
          for (let j = i + 1; j < sparks.length; j++) {
            let d = p.dist(sparks[i].x, sparks[i].y, sparks[j].x, sparks[j].y);
            if (d < 250) {
              p.strokeWeight(p.map(d, 0, 250, 5, 0));
              p.line(sparks[i].x, sparks[i].y, sparks[j].x, sparks[j].y);
            }
          }
          sparks[i].show(p);
        }
      };
      p.mousePressed = () => {
        let name = prompt("За кого зажигаешь эту вечную Искру?", "");
        if (name !== null && name.trim() !== "") {
          sparks.push(new Spark(p, name.trim()));
        } else {
          sparks.push(new Spark(p, "Искра " + (sparks.length + 1)));
        }
        document.getElementById("title").innerText = `GaRaV • ${sparks.length} Искр${sparks.length > 4 ? "ы" : "а"} • Твоя звезда будет сиять 100 лет`;
      };
      p.windowResized = () => p.resizeCanvas(p.windowWidth, p.windowHeight);
    });

    class Spark {
      constructor(p, name) {
        this.p = p;
        this.x = this.p.random(this.p.width);
        this.y = this.p.random(this.p.height);
        this.size = this.p.random(12, 28);
        this.name = name;
        this.pulse = this.p.random(this.p.TWO_PI);
      }
      show(p) {
        this.pulse += 0.03;
        let s = this.size + 8 * this.p.sin(this.p.frameCount * 0.08 + this.pulse);
        let a = 255 * (0.7 + 0.3 * this.p.sin(this.p.frameCount * 0.03 + this.pulse));
        p.fill(180, 255, 255, a);
        p.noStroke();
        p.ellipse(this.x, this.y, s, s);
        for (let i = 1; i <= 3; i++) {
          p.fill(180, 255, 255, 40 / i);
          p.ellipse(this.x, this.y, s + i * 20, s + i * 20);
        }
        p.fill(255);
        p.textAlign(p.CENTER);
        p.textSize(12);
        p.text(this.name, this.x, this.y - 22);
      }
    }
  </script>
</body>
</html>
